}

<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üéÑ Santa Fifteen Puzzle ‚Äî Master‚Äôs Edition</title>

  <link rel="stylesheet" href="styles.css" />

  <!-- ‚úÖ Firebase Web Config (must exist BEFORE firebase-init.js runs) -->

  <script>
    window.FIREBASE_CONFIG = {
      apiKey: "AIzaSyAeAnxg45EzMctbhFJVqMeSJiF7LtBC5uY",
      authDomain: "webproject3-b556b.firebaseapp.com",
      projectId: "webproject3-b556b",
      storageBucket: "webproject3-b556b.firebasestorage.app",
      messagingSenderId: "608210609718",
      appId: "1:608210609718:web:5f52922bec76dbf0825a97",
      measurementId: "G-CV2WESDZNC"
    };
  </script>

  <!-- ‚úÖ Firebase (compat CDN) - ONLY ONCE -->

  <script defer src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>

  <script defer src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>

  <script defer src="https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore-compat.js"></script>

  <!-- ‚úÖ Firebase init MUST come before any firebase usage -->

  <script defer src="js/firebase-init.js"></script>

  <!-- ‚úÖ App scripts (order matters) -->

  <script defer src="js/audio.js"></script>

  <script defer src="js/puzzle.js"></script>

  <script defer src="js/firebase_live.js"></script>

  <script defer src="js/app.js"></script>

</head>

<body>
  <div class="bgSnow" aria-hidden="true"></div>

  <div class="app">
    <!-- Top bar -->
    <header class="topbar">
      <div class="brand">
        <div class="logo" title="Santa Fifteen Puzzle">üéÖ</div>
        <div class="brandText">
          <div class="title">Santa Fifteen Puzzle</div>
          <div class="subtitle">Master‚Äôs Edition ‚Ä¢ MySQL + Firebase Demo</div>
        </div>
      </div>

```
  <div class="toolbar">
    <div class="toolGroup">
      <label class="toolLabel" for="themeSelect">Theme</label>
      <select id="themeSelect" class="select" aria-label="Theme">
        <!-- ‚úÖ MUST match exact filenames in /public/assets -->
        <option value="santa.jpg" selected>Santa (santa.jpg)</option>
        <option value="christmas.png">Christmas (christmas.png)</option>
      </select>
    </div>

    <div class="toolGroup">
      <label class="toolLabel" for="sizeSelect">Board</label>
      <select id="sizeSelect" class="select" aria-label="Board size">
        <option value="4" selected>4√ó4</option>
        <option value="3">3√ó3</option>
        <option value="5">5√ó5</option>
      </select>
    </div>

    <div class="toolGroup buttonsRow">
      <button id="btnNew" class="btn" title="Fresh board">New</button>
      <button id="btnShuffle" class="btn btnPrimary" title="Shuffle solvable puzzle">Shuffle</button>
      <button id="btnHint" class="btn" title="Show a smart hint">Hint</button>
    </div>

    <div class="toolGroup buttonsRow">
      <button id="btnNumbers" class="btn" title="Toggle numbers overlay">Numbers: On</button>
      <button id="btnSound" class="btn" title="Toggle Christmas sounds">Sound: On</button>
      <button id="btnPreview" class="btn" title="Preview the full image">Preview</button>
    </div>
  </div>
</header>

<!-- Main layout -->
<main class="layout">
  <!-- Left: puzzle -->
  <section class="card puzzleCard">
    <div class="cardHead">
      <div class="cardTitle">Puzzle Board</div>

      <div class="stats">
        <div class="stat">
          <span class="statLabel">Moves</span>
          <b id="moves" class="statValue">0</b>
        </div>
        <div class="stat">
          <span class="statLabel">Time</span>
          <b id="time" class="statValue">00:00</b>
        </div>
        <div class="stat">
          <span class="statLabel">Status</span>
          <b id="winBadge" class="badge">Playing</b>
        </div>
      </div>
    </div>

    <div class="boardWrap">
      <div id="board" class="board" aria-label="Sliding puzzle board"></div>
    </div>

    <div class="cardFoot">
      <div class="footLeft">
        <button id="btnReset" class="btn btnGhost" title="Reset to initial shuffled state">Reset</button>
        <button id="btnSave" class="btn btnGhost" title="Save solved run to MySQL">Save to DB</button>
      </div>

      <div class="footRight">
        <div id="status" class="statusLine">Ready.</div>
      </div>
    </div>
  </section>

  <!-- Right: panels -->
  <aside class="side">
    <details class="card" open>
      <summary class="cardHead slim">
        <div class="cardTitle">Firebase Live Feed (Required Demo)</div>
      </summary>
      <div class="cardBody">
        <div class="help">
          Enable <b>Firestore</b> + <b>Anonymous Auth</b> in Firebase Console.
          Solving a puzzle posts an event and updates here.
        </div>
        <div id="liveFeed" class="feed"></div>
      </div>
    </details>

    <details class="card" open>
      <summary class="cardHead slim">
        <div class="cardTitle">Leaderboard (MySQL)</div>
      </summary>
      <div class="cardBody">
        <div class="row">
          <input id="playerName" class="input" placeholder="Player name (for DB save)" />
          <button id="btnLoadLB" class="btn btnGhost">Load</button>
        </div>
        <div id="leaderboard" class="lb"></div>
        <div class="help small">
          MySQL works only when hosted on CODD/PHP server (not <code>file://</code>).
        </div>
      </div>
    </details>
  </aside>
</main>
```

  </div>

  <!-- Preview Modal -->

  <div id="previewModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalInner">
      <div class="modalHead">
        <div class="modalTitle">Preview Image</div>
        <button id="btnClosePreview" class="btn">Close</button>
      </div>
      <div class="modalBody">
        <img id="previewImage" class="previewImage" alt="Puzzle preview" />
      </div>
    </div>
  </div>

  <!-- Hint Modal -->

  <div id="hintModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalInner">
      <div class="modalHead">
        <div class="modalTitle">üéÅ Hint Assistant</div>
        <button id="btnCloseHint" class="btn">Close</button>
      </div>
      <div class="modalBody">
        <div id="hintText" class="help"></div>
      </div>
    </div>
  </div>

  <!-- Intro / Start Modal -->

  <div id="introModal" class="modal" role="dialog" aria-modal="true">
    <div class="modalInner intro">
      <div class="modalHead">
        <div class="modalTitle">Welcome üéÑ</div>
        <button id="btnSkipIntro" class="btn btnGhost">Skip</button>
      </div>

```
  <div class="modalBody">
    <div class="introHero">
      <div class="heroIcon">üéÖ</div>
      <div>
        <div class="heroTitle">Santa‚Äôs Workshop: Fifteen Puzzle</div>
        <div class="heroSub">Pick your settings, then hit <b>Start Game</b>.</div>
      </div>
    </div>

    <div class="introGrid">
      <div class="introField">
        <label class="toolLabel" for="introName">Player Name</label>
        <input id="introName" class="input" placeholder="e.g., Vignesh" />
      </div>

      <div class="introField">
        <label class="toolLabel" for="introDifficulty">Difficulty</label>
        <select id="introDifficulty" class="select">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>
      </div>

      <div class="introField">
        <label class="toolLabel" for="introSize">Board</label>
        <select id="introSize" class="select">
          <option value="4" selected>4√ó4</option>
          <option value="3">3√ó3</option>
          <option value="5">5√ó5</option>
        </select>
      </div>

      <div class="introField">
        <label class="toolLabel" for="introTheme">Theme</label>
        <select id="introTheme" class="select">
          <!-- ‚úÖ MUST match exact filenames in /public/assets -->
          <option value="santa.jpg" selected>Santa (santa.jpg)</option>
          <option value="christmas.png">Christmas (christmas.png)</option>
        </select>
      </div>

      <div class="introField">
        <label class="toolLabel">Preferences</label>
        <div class="toggleRow">
          <label class="toggle">
            <input id="introSound" type="checkbox" checked />
            <span>Christmas Sound</span>
          </label>
          <label class="toggle">
            <input id="introNumbers" type="checkbox" checked />
            <span>Tile Numbers</span>
          </label>
        </div>
      </div>
    </div>

    <div class="introActions">
      <button id="btnStartGame" class="btn btnPrimary">Start Game</button>
    </div>
  </div>
</div>
```

  </div>

</body>
</html>
